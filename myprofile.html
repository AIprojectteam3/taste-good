<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지</title>
    <link rel="stylesheet" href="css/menu.css">
    <link rel = "stylesheet" href = "css/myprofile.css">
    <link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel = "stylesheet" href = "css/postmodal.css">
    <link rel = "stylesheet" href = "css/createmodal.css">

    
    <script src = "//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src = "js/postmodal.js"></script>
    <script src = "js/createPostModal.js"></script>
    <script src = "js/myprofile.js"></script>
    <script src = "js/Back/menu.js"></script>
    <script src = "js/pointLogModal.js"></script>

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <div class = "container">
        <!-- 메뉴 영역 -->
        <aside class="menu">
            <section class="profile">
                <div class = "profile-header">
                    <div class="image">
                        <img src="image/profile-icon.png" alt="프로필 사진" />
                    </div>
                    <div class="nickname-container">
                        <span class="nickname">방문자</span>
                        <span class="email-text">방문자@맛잘알연구소.com</span>
                    </div>
                </div>
                <div class = "profile-stats">
                    <div class="level">
                        <div class = "level-text-container">
                            <span class="level-text-lv">Lv.</span>
                            <span class="level-text level-value">0</span>
                        </div>
                        <div class="level-icon-container">
                            <img class = "level_icon" src = "image/dropper-icon.png" alt = "레벨 아이콘">
                        </div>
                    </div>
                    <div class = "user-info">
                        <div class="post">
                            <a href = "myprofile.html">
                                <span>Posts</span>
                                <span class = "post-count">0</span>
                            </a>
                        </div>
                        <div class="point" id = "pointLogBtn">
                            <a href = "#">
                                <span>Point</span>
                                <span class = "point-count">0</span>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 차트 영역 -->
            <section class="chart">
                <div class="chart-header">
                    <h3>실시간 인기 검색어</h3>
                </div>
                <ol id="searchRankingList">
                    <!-- 순위 데이터가 여기에 동적으로 삽입됩니다 -->
                </ol>
            </section>

            <!-- 메인 메뉴 -->
            <nav class="main-menu">
                <ul>
                    <hr>
                    <li><a href = "index.html">
                        <img src = "image/popularity-icon.png" alt = "인기 메뉴">
                        <span>인기 메뉴</span>
                    </a></li>
                    <hr>
                    <li><a href = "AIMenu.html">
                        <img src = "image/ai-icon.png" alt = "AI 메뉴 추천">
                        <span>AI 메뉴 추천</span>
                    </a></li>
                    <hr>
                    <li><a href = "roulette.html">
                        <img src = "image/roulette-icon.png" alt = "룰렛">
                        <span>룰렛</span>
                    </a></li>
                    <li><a href = "tamagotchi.html">
                        <img src = "image/tamagotchi-icon.png" alt = "다마고치">
                        <span>다마고치</span>
                    </a></li>
                    <hr>
                    <li><a href = "myprofile.html">
                        <img src = "image/myprofile-icon.png" alt = "마이페이지">
                        <span>마이페이지</span>
                    </a></li>
                    <hr>
                    <li><a href = "#" class = "logoutPCMenu" onclick="handleLogout(event)">
                        <img src = "image/logout-icon.png" alt = "로그아웃">
                        <span>로그아웃</span>
                    </a></li>
                    <hr>
                </ul>
            </nav>
        </aside>

        <main class = "content" id = "mypageContent">
            <div class = "myprofile-header">
                <div class = "myprofile-image">
                    <img src = "image/profile-icon.png" alt = "프로필 사진">
                </div>
                <div class = "myprofile">
                    <div class = "information">
                        <div class = "nameTag">
                            <span class = "username_span"></span>
                        </div>
                        <div class = "level">
                            <span class = "level_label">Lv. </span><span class = "level_value"></span>
                            <span><img class = "level-icon2" src = "image/dropper-icon.png" alt = "레벨1 아이콘"></span>
                        </div>
                        <div class = "editBtn">
                            <span class = "profileEditBtn">프로필 편집</span>
                            <img class = "edit_icon" src = "image/edit-icon.png" alt = "프로필 편집 아이콘(모바일용)">
                        </div>
                    </div>
                    <div class = "emailInfor">
                        <span class = "emailSpan">dfaf<!-- 유저 이메일 삽입! --></span>
                    </div>
                    <div class = "stats">
                        <div class = "Post">
                            <a href = "#">Post</a>
                            <span class = "post_span"></span>
                        </div>
                        <div class = "point point-log-trigger">
                            <a href = "#">Point</a>
                            <span class = "point_span"></span>
                        </div>
                    </div>
                    <div class="short-info">
                        <span class = "profile_des"></span>
                    </div>
                </div>
            </div>
            <div class="myprofile-content">
                <!-- 탭 메뉴 -->
                <div class="tabs">
                    <button class="tab active" data-tab="my-posts">내 게시물</button>
                    <button class="tab" data-tab="favorites">좋아요 표시한 게시물</button>
                </div>

                <!-- 게시물 콘텐츠 -->
                <div class="tab-content" id = "my-posts">
                    <!-- 게시물 콘텐츠 표시. -->
                </div>

                <!-- 즐겨찾기 콘텐츠 -->
                <div class="tab-content hidden" id = "favorites">
                    <!-- 즐겨찾기 콘텐츠가 여기에 표시됩니다. -->
                </div>
            </div>
        </main>
    </div>

    <!-- =================================================================================== -->
    <!-- 게시물 모달 -->
    <!-- =================================================================================== -->
    <div class = "modal-overlay" id = "index-modal">
        <div class = "modal-window">
            <div class = "modal-left">
                <div class = "modal-img">
                    <button class = "slide-nav prev">‹</button>
                    <div class = "slide-container">
                        <!-- 여기에 이미지 슬라이드 -->
                        <img class = "slide-img" src = "" alt = "이미지 슬라이드 삽입할 곳">
                        <div class = "slide-thumbnails">
                            <!-- 여기 이미지 썸네일들 삽입하기 -->
                        </div>
                    </div>
                    <button class = "slide-nav next">›</button>
                </div>
            </div>
            <div class = "modal-right">
                <div class = "modal-header">
                    <div class = "post-user">
                        <div class = "user-profile-img">
                            <img src = "" alt = "작성자 프로필 사진">
                        </div>
                        <div class = "user-nickname">
                            <span>유저 닉네임</span>
                            <!-- <span class = "postMenuBtn">···</span> -->
                        </div>
                    </div>
                    <div class = "post-content-div">
                        <div>
                            <h3 class = "post-title">여기에 게시물 타이틀 삽입</h3>
                            <div class = "post-content"><span class = "post-content-text">여기에 게시물 콘텐츠 삽입</span></div>
                        </div>
                        <button class="read-more-btn" style="display:none;">더보기</button>
                    </div>
                    <div class = "post-comment">
                        <!-- 여기에 댓글 밑의 구조대로 삽입 -->
                        <!--<div class = "comment-user">
                                <div class = "user-profile-img"><img src = "" alt = "댓글 작성자 프로필 사진"></div>
                                <div clsss = "comment-user-nickname"><span>댓글 작성자 닉네임</span></div>
                                <div class = "comment-content"><span>댓글 내용</span></div>
                            </div> -->
                    </div>
                </div>
                <div class = "comment-input-div">
                    <div class = "commentInputPC">
                        <div class = "communityBtn">
                            <a class = "heartBtn">
                                <img src = "image/heart-icon.png" alt = "하트">
                            </a>
                            <!-- <a class = "shareBtn">
                                <img src = "image/send-icon.png" alt = "공유">
                            </a>
                            <a class = "bookmarkBtn">
                                <img src = "image/bookmark-icon.png" alt = "북마크">
                            </a> -->
                        </div>
                        <input type="text" class="comment-input" name = "commentPC" placeholder="댓글을 입력하세요">
                        <button class="comment-submit">등록</button>
                    </div>
                </div>
            </div>
            <span class = "close-area" id = "modal-close">x</span>
        </div>
    </div>

    <!-- =================================================================================== -->
    <!-- 게시물 수정 모달 --> 
    <!-- =================================================================================== -->
    <div id="createPostFormModal" class="create-post-form-overlay">
        <div class="create-post-form-window">
            <div class="create-post-form-left">
                <input type="file" id="createPostImageUpload" accept="image/*" multiple style="display: none;">
                <div class="create-post-slider-area">
                    <div class="create-post-main-image-container" id="createPostSliderMain">
                        <!-- 이미지 슬라이드 및 '사진 추가' 슬라이드가 여기에 동적으로 삽입됩니다. -->
                    </div>
                    <!-- 슬라이드 네비게이션 버튼 -->
                    <button class="create-post-slide-nav prev" id="createPostNavPrev" style="display: none;">‹</button>
                    <button class="create-post-slide-nav next" id="createPostNavNext" style="display: none;">›</button>
                    
                    <div class="create-post-thumbnails-container" id="createPostThumbnails">
                        <!-- 썸네일 및 '사진 추가' 썸네일이 여기에 동적으로 삽입됩니다. -->
                    </div>
                </div>
            </div>
            <div class="create-post-form-right">
                <div class="input-group">
                    <input type="text" id="createPostTitle" placeholder="제목을 입력하세요" maxlength="100">
                    <div class="char-count" id = "titleCount">
                            <span id="titleCharCount">0</span>/100
                    </div>
                </div>
                <div class="input-group">
                    <textarea id="createPostContent" placeholder="내용을 입력하세요" maxlength="2000"></textarea>
                    <div class="char-count" id = "contentCount">
                            <span id="contentCharCount">0</span>/2000
                    </div>
                </div>
                <button id="submitCreatePostBtn">수정</button>
            </div>
        </div>
    </div>

    <!-- 모바일 메뉴 -->
    <nav class="bottom-nav">
        <div class = "hamburger-menu" id = "hamburgerMenu">
            <img src = "image/menu-icon.png" alt = "메뉴 아이콘">
        </div>
        <div class = "site-title">맛잘알연구소</div>

        <div class="mobile-menu" id="mobileMenu">
            <ul class="mobile-menu-list">
                <li><a href="index.html">인기메뉴</a></li>
                <li><a href="AIMenu.html">AI 메뉴 추천</a></li>
                <li><a href="roulette.html">룰렛</a></li>
                <li><a href="tamagotchi.html">다마고치</a></li>
                <li><a href="myprofile.html">마이페이지</a></li>
                <li><a href="#" class = "logoutMenu" onclick="handleLogout(event)">로그아웃</a></li>
            </ul>
        </div>
    </nav>

    <!-- ===================================================================================== -->
    <!-- 프로필 편집 모달 -->
    <!-- ===================================================================================== -->
    <div id="profileEditModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header-profile">
                <h2>프로필 편집</h2>
                <span class="close-btn">&times;</span>
            </div>
            <div class="modal-body">
                <form class="profile-edit-form">
                    <div class="modal-body-container">
                        <!-- 왼쪽: 유저 정보 수정 -->
                        <div class="modal-left-section">
                            <h3 class="section-title">기본 정보</h3>
                            
                            <!-- 프로필 이미지 -->
                            <div class="profile-image-container">
                                <label>프로필 사진</label>
                                <div class="profile-image-wrapper">
                                    <img src="image/profile-icon.png" alt="프로필 이미지" class="profile-image-preview">
                                    <div class="change-photo-overlay">사진 변경</div>
                                    <input type="file" id="profileImageUpload" accept="image/*">
                                </div>
                            </div>
                            
                            <!-- 기본 정보 입력 -->
                            <div class="user-info-inputs">
                                <div class="input-profilegroup">
                                    <label>닉네임</label>
                                    <input type="text" class="username_input" placeholder="닉네임">
                                </div>
                                <div class="input-profilegroup">
                                    <label>비밀번호</label>
                                    <input type="password" class="password_input" placeholder="새 비밀번호 (변경시에만 입력)">
                                </div>
                                <div class="input-profilegroup">
                                    <label>비밀번호 확인</label>
                                    <input type="password" class="password_confirm_input" placeholder="비밀번호 확인">
                                </div>
                            </div>
                            
                            <!-- 주소 정보 -->
                            <div class="address-section">
                                <label>주소 정보</label>
                                <div class="address-input-profilegroup">
                                    <input type="text" class="address_input" placeholder="주소를 검색해주세요" readonly>
                                    <button type="button" class="address-search-btn">주소 검색</button>
                                </div>
                                <input type="text" class="detail_address_input" placeholder="상세주소를 입력해주세요">
                            </div>
                            
                            <!-- 프로필 설명 -->
                            <div class="profile-description-section">
                                <label>프로필 설명</label>
                                <textarea class="shortInfo" placeholder="자신을 소개해보세요!" rows="4"></textarea>
                            </div>
                        </div>
                        
                        <!-- 오른쪽: 알레르기 정보 수정 -->
                        <div class="modal-right-section">
                            <h3 class="section-title">알레르기 정보</h3>
                            <p class="section-description">해당하는 알레르기 항목을 선택해주세요.</p>
                            
                            <div class="allergen-checkboxes" id="allergenCheckboxes">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                            
                            <div class="allergen-info">
                                <p class="info-text">
                                    <i class="info-icon">ℹ️</i>
                                    선택한 알레르기 정보는 메뉴 추천 시 제외됩니다.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 하단 버튼 -->
                    <div class="modal-footer">
                        <button type="submit" class="submitBtn">수정 완료</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>